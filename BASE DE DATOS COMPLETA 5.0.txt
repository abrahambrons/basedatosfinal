-- Generado por Oracle SQL Developer Data Modeler 4.1.3.901
--   en:        2016-05-11 16:17:20 VET
--   sitio:      Oracle Database 11g
--   tipo:      Oracle Database 11g




DROP
  TABLE CIUDAD_TB CASCADE CONSTRAINTS ;

DROP
  TABLE COMENTARIO CASCADE CONSTRAINTS ;

DROP
  TABLE DIRECCION CASCADE CONSTRAINTS ;

DROP
  TABLE DIRECCION_USER CASCADE CONSTRAINTS ;

DROP
  TABLE DISPONIBILIDAD CASCADE CONSTRAINTS ;

DROP
  TABLE MENSAJERO CASCADE CONSTRAINTS ;

DROP
  TABLE PAIS_TB CASCADE CONSTRAINTS ;

DROP
  TABLE PEDIDO CASCADE CONSTRAINTS ;

DROP
  TABLE PEDIDO_DETAL CASCADE CONSTRAINTS ;

DROP
  TABLE PRODUCTO CASCADE CONSTRAINTS ;

DROP
  TABLE PRODUCTO_DETAL CASCADE CONSTRAINTS ;

DROP
  TABLE PROMO CASCADE CONSTRAINTS ;

DROP
  TABLE PROMO_PRO CASCADE CONSTRAINTS ;

DROP
  TABLE RESTAURANT CASCADE CONSTRAINTS ;

DROP
  TABLE RESTA_DISP CASCADE CONSTRAINTS ;

DROP
  TABLE TIPO CASCADE CONSTRAINTS ;

DROP
  TABLE USUARIO CASCADE CONSTRAINTS ;

CREATE
  TABLE CIUDAD_TB
  (
    ID         INTEGER NOT NULL ,
    CIUDAD     VARCHAR2 (50 CHAR) NOT NULL ,
    PAIS_TB_ID INTEGER NOT NULL
  ) ;
CREATE UNIQUE INDEX CIUDAD_TB__IDX ON CIUDAD_TB
  (
    PAIS_TB_ID ASC
  )
  ;
ALTER TABLE CIUDAD_TB ADD CONSTRAINT CIUDAD_TB_PK PRIMARY KEY ( ID ) ;


CREATE
  TABLE COMENTARIO
  (
    ID            INTEGER NOT NULL ,
    FECHA         DATE NOT NULL ,
    VALORACION    INTEGER NOT NULL ,
    DESCRIPCION   VARCHAR2 (80 CHAR) ,
    RESTAURANT_ID INTEGER NOT NULL ,
    USUARIO_ID    INTEGER NOT NULL
  ) ;
ALTER TABLE COMENTARIO ADD CONSTRAINT COMENTARIO_PK PRIMARY KEY ( ID ) ;


CREATE
  TABLE DIRECCION
  (
    ID            INTEGER NOT NULL ,
    DIRECCION     VARCHAR2 (80) NOT NULL ,
    RESTAURANT_ID INTEGER ,
    TELEFONO      VARCHAR2 (20 CHAR) NOT NULL ,
    CIUDAD_TB_ID  INTEGER NOT NULL
  ) ;
CREATE UNIQUE INDEX DIRECCION__IDX ON DIRECCION
  (
    CIUDAD_TB_ID ASC
  )
  ;
ALTER TABLE DIRECCION ADD CONSTRAINT DIRECCION_PK PRIMARY KEY ( ID ) ;


CREATE
  TABLE DIRECCION_USER
  (
    ID           INTEGER NOT NULL ,
    DIRECCION    VARCHAR2 (80 CHAR) NOT NULL ,
    USUARIO_ID   INTEGER ,
    CIUDAD_TB_ID INTEGER NOT NULL
  ) ;
ALTER TABLE DIRECCION_USER ADD CONSTRAINT DIRECCION_USER_PK PRIMARY KEY ( ID )
;


CREATE
  TABLE DISPONIBILIDAD
  (
    ID            INTEGER NOT NULL ,
    HORA_APERTURA DATE NOT NULL ,
    HORA_CIERRE   DATE NOT NULL
  ) ;
ALTER TABLE DISPONIBILIDAD ADD CONSTRAINT DISPONIBILIDAD_PK PRIMARY KEY ( ID )
;


CREATE
  TABLE MENSAJERO
  (
    ID             INTEGER NOT NULL ,
    NOMBRE         VARCHAR2 (80) NOT NULL ,
    CEDULA         VARCHAR2 (9 CHAR) NOT NULL ,
    DISPONIBILIDAD CHAR (1) NOT NULL ,
    TELEFONO       VARCHAR2 (20 CHAR) NOT NULL ,
    CIUDAD_TB_ID   INTEGER NOT NULL
  ) ;
ALTER TABLE MENSAJERO ADD CONSTRAINT MENSAJERO_PK PRIMARY KEY ( ID ) ;
ALTER TABLE MENSAJERO ADD CONSTRAINT MENSAJERO_CEDULA_UN UNIQUE ( CEDULA ) ;


CREATE
  TABLE PAIS_TB
  (
    ID           INTEGER NOT NULL ,
    PAIS         VARCHAR2 (50) NOT NULL ,
    CIUDAD_TB_ID INTEGER NOT NULL
  ) ;
CREATE UNIQUE INDEX PAIS_TB__IDX ON PAIS_TB
  (
    CIUDAD_TB_ID ASC
  )
  ;
ALTER TABLE PAIS_TB ADD CONSTRAINT PAIS_TB_PK PRIMARY KEY ( ID ) ;


CREATE
  TABLE PEDIDO
  (
    ID              INTEGER NOT NULL ,
    FECHA           DATE NOT NULL ,
    ESTADO          INTEGER NOT NULL ,
    HORA_PEDIDO     DATE NOT NULL ,
    HORA_ENTREGA    DATE ,
    CANTIDAD        INTEGER NOT NULL ,
    COSTO_ENVIO     INTEGER NOT NULL ,
    MENSAJERO_ID    INTEGER ,
    USUARIO_ID      INTEGER NOT NULL ,
    PROMO_ID        INTEGER ,
    PEDIDO_DETAL_ID INTEGER
  ) ;
ALTER TABLE PEDIDO ADD CONSTRAINT FKArc_1 CHECK ( ( (PEDIDO_DETAL_ID IS NOT
NULL) AND
(
  PROMO_ID IS NULL
)
) OR
(
  (
    PROMO_ID IS NOT NULL
  )
  AND
  (
    PEDIDO_DETAL_ID IS NULL
  )
)
OR
(
  (
    PEDIDO_DETAL_ID IS NULL
  )
  AND
  (
    PROMO_ID IS NULL
  )
)
) ;
ALTER TABLE PEDIDO ADD CONSTRAINT PEDIDO_PK PRIMARY KEY ( ID ) ;


CREATE
  TABLE PEDIDO_DETAL
  (
    ID INTEGER NOT NULL
  ) ;
ALTER TABLE PEDIDO_DETAL ADD CONSTRAINT PEDIDO_DETAL_PK PRIMARY KEY ( ID ) ;


CREATE
  TABLE PRODUCTO
  (
    ID            INTEGER NOT NULL ,
    NOMBRE        VARCHAR2 (80 CHAR) NOT NULL ,
    DESCRIPCION   VARCHAR2 (80 CHAR) ,
    IMG           VARCHAR2 (250 CHAR) ,
    COSTO         INTEGER NOT NULL ,
    RESTAURANT_ID INTEGER NOT NULL
  ) ;
ALTER TABLE PRODUCTO ADD CONSTRAINT PRODUCTO_PK PRIMARY KEY ( ID ) ;


CREATE
  TABLE PRODUCTO_DETAL
  (
    CANTIDAD_PRODUCTO INTEGER NOT NULL ,
    PEDIDO_DETAL_ID   INTEGER NOT NULL ,
    PRODUCTO_ID       INTEGER NOT NULL
  ) ;


CREATE
  TABLE PROMO
  (
    ID          INTEGER NOT NULL ,
    COSTO       INTEGER NOT NULL ,
    DESCRIPCION VARCHAR2 (80) ,
    IMG         VARCHAR2 (250 CHAR)
  ) ;
ALTER TABLE PROMO ADD CONSTRAINT PROMO_PK PRIMARY KEY ( ID ) ;


CREATE
  TABLE PROMO_PRO
  (
    PRODUCTO_ID INTEGER NOT NULL ,
    PROMO_ID    INTEGER NOT NULL
  ) ;


CREATE
  TABLE RESTAURANT
  (
    ID          INTEGER NOT NULL ,
    NOMBRE      VARCHAR2 (80 CHAR) NOT NULL ,
    CORREO      VARCHAR2 (40 CHAR) NOT NULL ,
    IMG         VARCHAR2 (250 CHAR) ,
    DESCRIPCION VARCHAR2 (80 CHAR) ,
    TIPO_ID     INTEGER NOT NULL
  ) ;
CREATE UNIQUE INDEX RESTAURANT__IDX ON RESTAURANT
  (
    TIPO_ID ASC
  )
  ;
ALTER TABLE RESTAURANT ADD CONSTRAINT RESTAURANT_PK PRIMARY KEY ( ID ) ;
ALTER TABLE RESTAURANT ADD CONSTRAINT RESTAURANT_CORREO_UN UNIQUE ( CORREO ) ;


CREATE
  TABLE RESTA_DISP
  (
    DIA               VARCHAR2 (20 CHAR) NOT NULL ,
    RESTAURANT_ID     INTEGER NOT NULL ,
    DISPONIBILIDAD_ID INTEGER NOT NULL
  ) ;


CREATE
  TABLE TIPO
  (
    ID          INTEGER NOT NULL ,
    DESCRIPCION VARCHAR2 (80 CHAR) NOT NULL
  ) ;
ALTER TABLE TIPO ADD CONSTRAINT TIPO_PK PRIMARY KEY ( ID ) ;


CREATE
  TABLE USUARIO
  (
    ID         INTEGER NOT NULL ,
    ADMIN      CHAR (1) NOT NULL ,
    CEDULA     VARCHAR2 (9 CHAR) NOT NULL ,
    NOMBRE     VARCHAR2 (80 CHAR) NOT NULL ,
    CONTRASEÑA VARCHAR2 (20 CHAR) NOT NULL ,
    TELEFONO   VARCHAR2 (20 CHAR) NOT NULL ,
    CORREO     VARCHAR2 (40 CHAR) NOT NULL ,
    ESTADO     CHAR (1) NOT NULL
  ) ;
ALTER TABLE USUARIO ADD CONSTRAINT USUARIO_PK PRIMARY KEY ( ID ) ;
ALTER TABLE USUARIO ADD CONSTRAINT USUARIO_CORREO_UN UNIQUE ( CORREO ) ;
ALTER TABLE USUARIO ADD CONSTRAINT USUARIO_CEDULA_UN UNIQUE ( CEDULA ) ;


ALTER TABLE CIUDAD_TB ADD CONSTRAINT CIUDAD_TB_PAIS_TB_FK FOREIGN KEY (
PAIS_TB_ID ) REFERENCES PAIS_TB ( ID ) ;

ALTER TABLE COMENTARIO ADD CONSTRAINT COMENTARIO_RESTAURANT_FK FOREIGN KEY (
RESTAURANT_ID ) REFERENCES RESTAURANT ( ID ) ;

ALTER TABLE COMENTARIO ADD CONSTRAINT COMENTARIO_USUARIO_FK FOREIGN KEY (
USUARIO_ID ) REFERENCES USUARIO ( ID ) ;

ALTER TABLE DIRECCION ADD CONSTRAINT DIRECCION_CIUDAD_TB_FK FOREIGN KEY (
CIUDAD_TB_ID ) REFERENCES CIUDAD_TB ( ID ) ;

ALTER TABLE DIRECCION ADD CONSTRAINT DIRECCION_RESTAURANT_FK FOREIGN KEY (
RESTAURANT_ID ) REFERENCES RESTAURANT ( ID ) ;

ALTER TABLE DIRECCION_USER ADD CONSTRAINT DIRECCION_USER_CIUDAD_TB_FK FOREIGN
KEY ( CIUDAD_TB_ID ) REFERENCES CIUDAD_TB ( ID ) ;

ALTER TABLE DIRECCION_USER ADD CONSTRAINT DIRECCION_USER_USUARIO_FK FOREIGN KEY
( USUARIO_ID ) REFERENCES USUARIO ( ID ) ;

ALTER TABLE MENSAJERO ADD CONSTRAINT MENSAJERO_CIUDAD_TB_FK FOREIGN KEY (
CIUDAD_TB_ID ) REFERENCES CIUDAD_TB ( ID ) ;

ALTER TABLE PAIS_TB ADD CONSTRAINT PAIS_TB_CIUDAD_TB_FK FOREIGN KEY (
CIUDAD_TB_ID ) REFERENCES CIUDAD_TB ( ID ) ;

ALTER TABLE PEDIDO ADD CONSTRAINT PEDIDO_MENSAJERO_FK FOREIGN KEY (
MENSAJERO_ID ) REFERENCES MENSAJERO ( ID ) ;

ALTER TABLE PEDIDO ADD CONSTRAINT PEDIDO_PEDIDO_DETAL_FK FOREIGN KEY (
PEDIDO_DETAL_ID ) REFERENCES PEDIDO_DETAL ( ID ) ;

ALTER TABLE PEDIDO ADD CONSTRAINT PEDIDO_PROMO_FK FOREIGN KEY ( PROMO_ID )
REFERENCES PROMO ( ID ) ;

ALTER TABLE PEDIDO ADD CONSTRAINT PEDIDO_USUARIO_FK FOREIGN KEY ( USUARIO_ID )
REFERENCES USUARIO ( ID ) ;

ALTER TABLE PRODUCTO_DETAL ADD CONSTRAINT PRODUCTO_DETAL_PEDIDO_DETAL_FK
FOREIGN KEY ( PEDIDO_DETAL_ID ) REFERENCES PEDIDO_DETAL ( ID ) ;

ALTER TABLE PRODUCTO_DETAL ADD CONSTRAINT PRODUCTO_DETAL_PRODUCTO_FK FOREIGN
KEY ( PRODUCTO_ID ) REFERENCES PRODUCTO ( ID ) ;

ALTER TABLE PRODUCTO ADD CONSTRAINT PRODUCTO_RESTAURANT_FK FOREIGN KEY (
RESTAURANT_ID ) REFERENCES RESTAURANT ( ID ) ;

ALTER TABLE PROMO_PRO ADD CONSTRAINT PROMO_PRO_PRODUCTO_FK FOREIGN KEY (
PRODUCTO_ID ) REFERENCES PRODUCTO ( ID ) ;

ALTER TABLE PROMO_PRO ADD CONSTRAINT PROMO_PRO_PROMO_FK FOREIGN KEY ( PROMO_ID
) REFERENCES PROMO ( ID ) ;

ALTER TABLE RESTAURANT ADD CONSTRAINT RESTAURANT_TIPO_FK FOREIGN KEY ( TIPO_ID
) REFERENCES TIPO ( ID ) ;

ALTER TABLE RESTA_DISP ADD CONSTRAINT RESTA_DISP_DISPONIBILIDAD_FK FOREIGN KEY
( DISPONIBILIDAD_ID ) REFERENCES DISPONIBILIDAD ( ID ) ;

ALTER TABLE RESTA_DISP ADD CONSTRAINT RESTA_DISP_RESTAURANT_FK FOREIGN KEY (
RESTAURANT_ID ) REFERENCES RESTAURANT ( ID ) ;


-- Informe de Resumen de Oracle SQL Developer Data Modeler: 
-- 
-- CREATE TABLE                            17
-- CREATE INDEX                             4
-- ALTER TABLE                             40
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
